<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Aprendiz de Violino</title>
    <link rel="shortcut icon" href="imagens/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="mediaqueries.css">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

    <style>
        .container {
      text-align: center;
    }

    #arealuno{
      background-color: #009E6D;
      border-radius: 7px;
      font-weight: bolder;

    }

    .caixa {
      background-color: darkgrey;
      padding: 10px;
      margin-top: 5px;
      border: none;
      width: 200px;
      color: black;
      border-radius: 7px;
    }

    .caixa::placeholder {
      color: black;
    }

    #login, #cadastro {
      margin-top: 10px;
      background-color: #64406C;
      color: white;
      padding: 10px 25px;
      border: none;
      cursor: pointer;
      border-radius: 7px;
      margin-right: 5px;
    }

    label {
      display: block;
      margin-top: 10px;
      font-weight: bolder;
      color: black;
    }

    #text{
        text-align: center;
    }
    </style>

</head>
<body>
    <header>
        <div id="banner"></div>
        <span id="iconeburger" class="material-symbols-outlined" onclick="clickMenu()">menu</span>
        <nav id="hamburguer">
            <a href="index.html">Inicio</a>
            <a href="autora.html">Autora</a>
            <a href="ebook.html">Ebook</a>
            <a href="certificado.html">Certificado</a>
            <a href="Jogos.html">Jogos</a>
            <a href="musical.html">Musical</a>
            <a href="oficinas.html">Oficinas</a>
            <a href="Animacoes.html">Anima√ß√µes</a>
            <a href="artigos.html">Artigos</a>
            <a href="podcast.html">Podcast</a>
            <a href="contato.html">Contato</a>
            <a id="arealuno" href="login.html">Portal Aluno</a>
        </nav>
        <nav id="menugrande">
            <a href="index.html">In√≠cio</a>
            <a href="autora.html">Autora</a>
            <a href="ebook.html">Ebook</a>
            <a href="certificado.html">Certificado</a>
            <a href="Jogos.html">Jogos</a>
            <a href="musical.html">Musical</a>
            <a href="oficinas.html">Oficinas</a>
            <a href="Animacoes.html">Anima√ß√µes</a>
            <a href="artigos.html">Artigos</a>
            <a href="podcast.html">Podcast</a>
            <a href="contato.html">Contato</a>
            <a id="arealuno" href="login.html">Portal Aluno</a>
        </nav>
    </header>
    <main>
          <h1>Bem-vindo ao Portal do aluno!</h1>

          <section class="conteinerjogos">
                <h2>Aprendiz Play</h2>
                <div class="interiorjogo">
                    <div><img src="imagens/aprendizplay.jpg" alt="foto do app aprendiz play"></div>
                    <p><strong>O Aprendiz Play √© um servi√ßo de streaming digital que d√° acesso aos √°udios do m√©todo O Aprendiz de Violino.</strong> </label></p>
                </div>
                <div class="botao-jogo">
                    <p class="botaojogar"><a href="aprendiz-play.html" target="_blank">Entrar</a> <span class="material-symbols-outlined">library_music</span></p>
                </div>
           </section>

           <section class="conteinerjogos">
                <h2>Aprendiz Teoria</h2>
                <div class="interiorjogo">
                    <div><img src="imagens/appteoria.jpg" alt="foto do app aprendiz play"></div>
                    <p><strong>O Aprendiz Teoria √© uma plataforma gamificada para iniciantes em teoria musical, que transforma o aprendizado em uma experi√™ncia interativa e divertida. Com li√ß√µes pr√°ticas, exerc√≠cios din√¢micos e jogos educativos, o usu√°rio desenvolve seus conhecimentos musicais de forma leve, progressiva e motivadora. </strong> </label></p>
                </div>
                <div class="botao-jogo">
                    <p class="botaojogar"><a href="app-teoria/index.html" target="_blank">Entrar</a> <span class="material-symbols-outlined">auto_stories</span></p>
                </div>
           </section>

<section id="blocoAluno" style="display:none; margin-top: 30px;">
  <h2>Ol√°, <span id="nomeAluno"></span>!</h2>
  <h3>Di√°rio de aula:</h3>
  
  <div id="historicoContainer"></div>

</section>




    </main>
    <footer>
        <p> ¬© 2017-2025 O Aprendiz de Violino</p>
        <div class="redes">
            <a href="https://www.instagram.com/oaprendizdeviolino/" target="_blank"><img src="imagens/instagram-icono.png" alt="logo instagram"></a>
            <a href="https://www.youtube.com/channel/UCyp5XrutqbnQCS0HmBV9VWg" target="blank"><img src="imagens/youtube-icono.png" alt="logo youtube"></a>
        </div>
        <p><a id="privacidade" href="Politicaprivacidade.html">Pol√≠tica de privacidade e Termos de uso</a></p>

    </footer>
    <script>
        function clickMenu(){
                if (hamburguer.style.display == 'block') {
                    hamburguer.style.display = 'none'
                } else {
                    hamburguer.style.display = 'block'
                }
            }

        // Script do carrousel (n√£o foi modificado)
        // ... (seu script de carrossel continua aqui sem altera√ß√µes)
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

  // Sua configura√ß√£o do Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyApHSOyYUImfmUWYrao2AOEH0rMwJm3ShE",
    authDomain: "app-do-aluno-13dde.firebaseapp.com",
    projectId: "app-do-aluno-13dde",
    storageBucket: "app-do-aluno-13dde.appspot.com",
    messagingSenderId: "911749754839",
    appId: "1:911749754839:web:1f3e47b181df83dea8a592"
  };

  // Inicializa Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Verifica se o usu√°rio est√° logado
  onAuthStateChanged(auth, user => {
    if (!user) {
      // Redireciona para o login se n√£o estiver autenticado
      window.location.href = "login.html";
    } else {
      console.log("Usu√°rio autenticado:", user.email);
      const db = getFirestore(app);
      const uid = user.uid;
      const docRef = doc(db, "alunos", uid);
      
      getDoc(docRef).then((docSnap) => {
        if (docSnap.exists()) {
          const dados = docSnap.data();

          document.getElementById("nomeAluno").innerText = dados.nome;

          // =========================================================================
          // MODIFICA√á√ÉO 2: L√≥gica JavaScript para criar o hist√≥rico de aulas.
          // =========================================================================
          
          // Pega o container do hist√≥rico no HTML
          const container = document.getElementById("historicoContainer");
          container.innerHTML = ''; // Limpa qualquer conte√∫do anterior

          // Verifica se existe um hist√≥rico de aulas e se n√£o est√° vazio
          if (dados.historicoAulas && dados.historicoAulas.length > 0) {
              
              // Opcional: Inverte a ordem para mostrar a aula mais recente primeiro
              const historicoInvertido = [...dados.historicoAulas].reverse();

              // Cria o HTML para cada aula registrada usando um loop
              historicoInvertido.forEach(aula => {
                  // Cria um 'div' para agrupar as informa√ß√µes da aula
                  const aulaDiv = document.createElement('div');
                  // Aplica um estilo simples para separar as aulas
                  aulaDiv.style.border = '1px solid #ccc';
                  aulaDiv.style.padding = '15px';
                  aulaDiv.style.margin = '10px 0';
                  aulaDiv.style.borderRadius = '8px';
                  aulaDiv.style.backgroundColor = '#f9f9f9'; // Cor de fundo suave

                  // Adiciona o conte√∫do da aula dentro do 'div'
                  aulaDiv.innerHTML = `
                      <h4 style="margin-top:0;"><strong>Data da aula:</strong> ${aula.data || "N√£o definida"}</h4>
                      <p><strong>üéµ Anota√ß√µes da aula:</strong> ${aula.anotacoes || "Nenhuma"}</p>
                      <p style="margin-bottom:0;"><strong>üßçPostura e posi√ß√£o do instrumento:</strong> ${aula.postura || "Nenhuma observa√ß√£o"}</p>
                      <p><strong>üé∂ M√∫sica de revis√£o:</strong> ${aula.musicaRevisao || "Nenhuma"}</p>
   
                  `;

                  // Adiciona o bloco da aula ao container principal
                  container.appendChild(aulaDiv);
              });

          } else {
              // Mensagem para alunos que ainda n√£o t√™m aulas registradas
              container.innerText = "Nenhuma aula registrada ainda. Aguarde a primeira atualiza√ß√£o do seu professor!";
          }
          // =========================================================================
          // FIM DA MODIFICA√á√ÉO NO JAVASCRIPT
          // =========================================================================

          document.getElementById("blocoAluno").style.display = 'block';

        } else {
          //alert("Dados do aluno n√£o encontrados.");
        }
      });
    }
  });
</script>

</body>
</html>